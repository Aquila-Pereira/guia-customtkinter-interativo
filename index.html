<!DOCTYPE html>
<html lang="pt-BR" class="light">
<head>
    <meta charset="UTF-big5">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guia Interativo CustomTkinter</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Estilos para a barra de rolagem (opcional, mas melhora a estética) */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        ::-webkit-scrollbar-thumb {
            background-color: #9ca3af; /* gray-400 */
            border-radius: 4px;
        }
        html.dark ::-webkit-scrollbar-thumb {
            background-color: #4b5563; /* gray-600 */
        }
        ::-webkit-scrollbar-thumb:hover {
            background-color: #6b7280; /* gray-500 */
        }
        html.dark ::-webkit-scrollbar-thumb:hover {
            background-color: #374151; /* gray-700 */
        }
        /* Estilo para o conteúdo principal para garantir o preenchimento da altura */
        #mainContentArea {
            height: calc(100vh - 4rem); /* Altura da viewport menos a altura do header */
        }
        /* Animação de fade-in para o conteúdo */
        .content-fade-enter {
            opacity: 0;
            transform: translateY(10px);
        }
        .content-fade-enter-active {
            opacity: 1;
            transform: translateY(0);
            transition: opacity 300ms ease-out, transform 300ms ease-out;
        }
        /* Highlight de busca */
        .search-highlight {
            background-color: #fdba74; /* orange-300 */
            color: #1f2937; /* gray-800 */
            border-radius: 2px;
            padding: 0 2px;
        }
        html.dark .search-highlight {
            background-color: #fb923c; /* orange-400 */
            color: #f3f4f6; /* gray-100 */
        }

        /* Estilo para o botão de copiar */
        .copy-button {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            padding: 0.25rem 0.5rem;
            font-size: 0.75rem;
            border-radius: 0.25rem;
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.2s;
        }
        .copy-button:hover {
            opacity: 1;
        }
        pre:hover .copy-button {
            opacity: 1;
        }

        /* Estilo para o botão de explicar código */
        .explain-code-button {
            position: absolute;
            top: 0.5rem;
            right: 4.5rem; /* Posição à esquerda do botão de copiar */
            padding: 0.25rem 0.5rem;
            font-size: 0.75rem;
            border-radius: 0.25rem;
            cursor: pointer;
            opacity: 0.7;
            transition: opacity 0.2s;
        }
        pre:hover .explain-code-button {
            opacity: 1;
        }
    </style>
</head>
<body class="bg-slate-50 dark:bg-slate-900 text-slate-800 dark:text-slate-200 font-sans antialiased">

    <header class="bg-white dark:bg-slate-800 shadow-md sticky top-0 z-50 h-16 flex items-center justify-between px-4 sm:px-6">
        <div class="flex items-center">
            <button id="sidebarToggle" class="md:hidden text-slate-600 dark:text-slate-300 hover:text-blue-600 dark:hover:text-blue-500 mr-3 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
            </button>
            <h1 class="text-xl sm:text-2xl font-bold text-blue-600 dark:text-blue-500">Guia Interativo CustomTkinter</h1>
        </div>
        <div class="flex items-center space-x-3 sm:space-x-4">
            <div class="relative">
                <input type="text" id="searchBar" placeholder="Buscar tópico..." class="w-32 sm:w-48 md:w-64 px-3 py-1.5 border border-slate-300 dark:border-slate-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 bg-slate-50 dark:bg-slate-700 text-sm">
                <span class="absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 dark:text-slate-500 text-lg">
                    &#x1F50D; </span>
            </div>
            <button id="themeToggle" class="text-slate-600 dark:text-slate-300 hover:text-blue-600 dark:hover:text-blue-500 p-2 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                <span id="themeIcon"></span> </button>
        </div>
    </header>

    <div class="flex flex-col md:flex-row " style="height: calc(100vh - 4rem);">
        <aside id="sidebar" class="w-full md:w-72 bg-slate-100 dark:bg-slate-800 p-4 space-y-2 border-r border-slate-200 dark:border-slate-700 overflow-y-auto transition-transform transform -translate-x-full md:translate-x-0 fixed md:sticky top-16 md:top-0 z-40 md:z-auto h-full md:h-auto">
            <nav id="navigationMenu">
                </nav>
        </aside>

        <main id="mainContentArea" class="flex-1 p-4 sm:p-6 lg:p-8 overflow-y-auto">
            <div id="contentDisplay" class="prose dark:prose-invert max-w-none">
                <div id="content-placeholder" class="text-center py-10">
                    <h2 class="text-2xl font-semibold text-slate-500 dark:text-slate-400">Bem-vindo(a)!</h2>
                    <p class="mt-2 text-slate-600 dark:text-slate-300">Selecione um tópico no menu lateral para começar a explorar o guia CustomTkinter.</p>
                </div>
            </div>
        </main>
    </div>

<script>
    const contentData = {
        "intro": {
            title: "✨ Desvendando o CustomTkinter: Seu Portal para GUIs Modernas! ✨",
            html: `
                <h3 class="text-2xl font-semibold mb-4 mt-0">Seção 1: O Ponto de Partida – Conhecendo o CustomTkinter</h3>
                <h4 class="text-xl font-medium mt-6 mb-2">🚀 O que é essa Magia Chamada CustomTkinter?</h4>
                <p>Imagine o Tkinter, a biblioteca padrão do Python para criar interfaces gráficas, mas com uma <strong>repaginada radical</strong>! O CustomTkinter é exatamente isso: uma extensão poderosa e superestilosa que transforma suas aplicações em verdadeiras obras de arte digitais. Ele foi projetado para oferecer um visual contemporâneo, temas claros e escuros que se adaptam ao seu humor (ou ao sistema operacional!), e widgets aprimorados que são um deleite para os olhos e para a usabilidade.</p>
                <p class="font-semibold mt-4">Por que você vai AMAR o CustomTkinter?</p>
                <ul class="list-disc list-inside space-y-1 mt-2">
                    <li>🎨 <strong>Visual Deslumbrante:</strong> Diga adeus às interfaces datadas! Suas aplicações terão um toque "flat" e moderno, alinhado com as últimas tendências de design.</li>
                    <li>🌙 <strong>Temas Claro/Escuro Integrados:</strong> Quer que sua app brilhe de dia e seja suave à noite? O CustomTkinter faz isso acontecer com um clique, oferecendo uma experiência de usuário impecável.</li>
                    <li>✨ <strong>Widgets Turbinados:</strong> Botões, caixas de texto, sliders... tudo foi redesenhado para ser mais bonito, mais funcional e mais responsivo.</li>
                    <li>🤝 <strong>Amigo do Desenvolvedor:</strong> Se você já conhece o Tkinter, a transição será suave como seda! A sintaxe é familiar, mas os resultados são espetaculares.</li>
                    <li>📏 <strong>Responsividade Nativa:</strong> Seus layouts se adaptarão graciosamente a diferentes tamanhos de tela, garantindo que sua app fique incrível em qualquer dispositivo.</li>
                    <li>🌍 <strong>Multiplataforma:</strong> Crie uma vez, execute em qualquer lugar! Windows, macOS, Linux... o CustomTkinter funciona em todos eles.</li>
                </ul>

                <h4 class="text-xl font-medium mt-6 mb-2">🛠️ Instalação: O Primeiro Passo para a Grandeza!</h4>
                <p>Começar é tão fácil quanto respirar! Abra seu terminal ou prompt de comando e digite:</p>
                <div class="code-container relative my-4"><pre class="bg-slate-800 dark:bg-slate-900 text-white p-4 rounded-md overflow-x-auto"><code class="language-bash">pip install customtkinter</code></pre><button class="copy-button bg-slate-600 hover:bg-slate-500 text-white" onclick="copyCode(this)">Copiar</button></div>
                <p>Pronto! Em poucos segundos, você estará equipado(a) para criar maravilhas!</p>

                <h4 class="text-xl font-medium mt-6 mb-2">🏗️ A Estrutura Dourada: Sua Primeira Aplicação CustomTkinter</h4>
                <p>Toda grande jornada começa com um primeiro passo. Veja como é simples montar a base da sua aplicação CustomTkinter:</p>
                <div class="code-container relative my-4"><pre class="bg-slate-800 dark:bg-slate-900 text-white p-4 rounded-md overflow-x-auto"><code class="language-python">
import customtkinter

# 🌟 Dica de Estilo: Defina o modo de aparência! 🌟
# Opções: "System" (padrão do SO), "Dark", "Light")
customtkinter.set_appearance_mode("System")

# 🌈 Dica de Cor: Escolha seu tema favorito! 🌈
# Opções: "blue" (padrão), "green", "dark-blue")
customtkinter.set_default_color_theme("blue")

# 🖼️ Crie a Janela Principal: O Palco da Sua Criação!
app = customtkinter.CTk()
app.geometry("400x250")  # Defina o tamanho ideal para sua janela
app.title("🎉 Minha Primeira Aplicação CustomTkinter! 🎉") # Um título que inspira!

# 🏷️ Adicione um Rótulo de Boas-Vindas!
label = customtkinter.CTkLabel(app, text="🚀 Olá, Mundo CustomTkinter! Prepare-se para inovar! 🚀")
label.pack(pady=40, padx=60) # Adiciona um espaçamento para o rótulo

# 🔄 Inicie o Loop Mágico: Sua Aplicação Ganha Vida!
app.mainloop()
                </code></pre><button class="copy-button bg-slate-600 hover:bg-slate-500 text-white" onclick="copyCode(this)">Copiar</button></div>
                <p class="font-semibold mt-4">Entendendo a Mágica por Trás do Código:</p>
                <ul class="list-disc list-inside space-y-1 mt-2">
                    <li><code>customtkinter.set_appearance_mode()</code>: É como escolher a iluminação do seu palco – claro, escuro ou automático!</li>
                    <li><code>customtkinter.set_default_color_theme()</code>: Aqui você define o esquema de cores que vai dar personalidade aos seus widgets.</li>
                    <li><code>customtkinter.CTk()</code>: Essa é a sua tela em branco, a janela principal onde tudo acontece.</li>
                    <li><code>app.geometry()</code> e <code>app.title()</code>: Dão forma e nome à sua janela, como um cartão de visitas.</li>
                    <li><code>customtkinter.CTkLabel()</code>: Cria um texto que pode ser uma mensagem, um título ou qualquer informação que você queira exibir.</li>
                    <li><code>label.pack()</code>: É o seu "assistente de palco" que posiciona o rótulo na janela, com um pouco de <code>pady</code> (espaço vertical) e <code>padx</code> (espaço horizontal) para que ele não fique grudado nas bordas.</li>
                    <li><code>app.mainloop()</code>: O coração da sua aplicação! Ele fica "escutando" por eventos (cliques, digitações) e mantém sua janela visível e interativa. Sem ele, sua app piscaria e sumiria!</li>
                </ul>
            `
        },
        "config": {
            title: "🖌️ Seção 2: Pinceladas de Estilo – Configurações Globais e Temas",
            html: `
                <p>O CustomTkinter te dá o poder de ser um verdadeiro artista! Com algumas linhas de código, você pode transformar a aparência da sua aplicação inteira.</p>
                <h4 class="text-xl font-medium mt-6 mb-2">🌓 Modo de Aparência (<code>set_appearance_mode</code>)</h4>
                <p>Quer que sua app se adapte ao ambiente? Use <code>"System"</code>. Prefere um visual sempre vibrante? Vá de <code>"Light"</code>. Ou talvez um toque de mistério e conforto? <code>"Dark"</code> é a sua escolha!</p>
                <div class="code-container relative my-4"><pre class="bg-slate-800 dark:bg-slate-900 text-white p-4 rounded-md overflow-x-auto"><code class="language-python">
# Experimente e veja a diferença!
customtkinter.set_appearance_mode("Dark") # Para um visual noturno elegante
# customtkinter.set_appearance_mode("Light") # Para um visual claro e arejado
                </code></pre><button class="copy-button bg-slate-600 hover:bg-slate-500 text-white" onclick="copyCode(this)">Copiar</button></div>

                <h4 class="text-xl font-medium mt-6 mb-2">🎨 Tema de Cores (<code>set_default_color_theme</code>)</h4>
                <p>Azul, verde ou azul escuro? Cada tema traz uma sensação diferente. Escolha o que mais combina com a sua marca ou com o propósito da sua aplicação!</p>
                <div class="code-container relative my-4"><pre class="bg-slate-800 dark:bg-slate-900 text-white p-4 rounded-md overflow-x-auto"><code class="language-python">
# Qual cor te inspira hoje?
customtkinter.set_default_color_theme("green") # Um toque de natureza e frescor!
# customtkinter.set_default_color_theme("dark-blue") # Para um visual mais sóbrio e profissional
                </code></pre><button class="copy-button bg-slate-600 hover:bg-slate-500 text-white" onclick="copyCode(this)">Copiar</button></div>

                <h4 class="text-xl font-medium mt-6 mb-2">🔍 Escala da UI (<code>set_widget_scaling</code>)</h4>
                <p>Para telas de alta resolução ou para quem prefere elementos maiores, essa função é um salva-vidas! Ajuste a escala de todos os widgets, garantindo que sua interface seja sempre confortável de usar.</p>
                <div class="code-container relative my-4"><pre class="bg-slate-800 dark:bg-slate-900 text-white p-4 rounded-md overflow-x-auto"><code class="language-python">
customtkinter.set_widget_scaling(1.1) # Tudo 10% maior! Perfeito para telas 4K ou para quem usa óculos! 😉
                </code></pre><button class="copy-button bg-slate-600 hover:bg-slate-500 text-white" onclick="copyCode(this)">Copiar</button></div>

                <h4 class="text-xl font-medium mt-6 mb-2">🔤 Escala da Fonte (<code>set_window_scaling</code>)</h4>
                <p>Assim como a escala dos widgets, você pode ajustar o tamanho de todas as fontes, garantindo legibilidade para todos os usuários.</p>
                <div class="code-container relative my-4"><pre class="bg-slate-800 dark:bg-slate-900 text-white p-4 rounded-md overflow-x-auto"><code class="language-python">
customtkinter.set_font_scaling(1.0) # Escala padrão, mas você pode experimentar!
                </code></pre><button class="copy-button bg-slate-600 hover:bg-slate-500 text-white" onclick="copyCode(this)">Copiar</button></div>
            `
        },
        "widgets_intro": {
            title: "🧰 Seção 3: A Caixa de Ferramentas do Artista – Widgets Essenciais",
            html: `
                <p>Aqui é onde a mágica realmente acontece! O CustomTkinter aprimora os widgets clássicos do Tkinter, tornando-os mais bonitos e funcionais. Explore os widgets no menu lateral!</p>
            `
        },
        "widget_ctk_toplevel": {
            title: "1. CTk & CTkToplevel",
            html: `
                <p><strong><code>CTk</code></strong>: Sua tela principal, o coração da sua aplicação. Já a conhecemos!</p>
                <p class="mt-2"><strong><code>CTkToplevel</code></strong>: Pense nela como uma "janela pop-up" elegante. Perfeita para exibir mensagens importantes, formulários de configuração ou qualquer coisa que precise de um foco extra, sem fechar a janela principal.</p>
                <div class="code-container relative my-4"><pre class="bg-slate-800 dark:bg-slate-900 text-white p-4 rounded-md overflow-x-auto"><code class="language-python">
import customtkinter

def open_toplevel():
    # 🚪 Abrindo uma nova dimensão!
    toplevel_window = customtkinter.CTkToplevel(app)
    toplevel_window.geometry("300x150")
    toplevel_window.title("✨ Janela Secundária Encantada ✨")
    toplevel_window.transient(app) # Faz com que ela fique sempre acima da janela pai
    toplevel_window.grab_set() # Bloqueia interação com a janela pai até esta ser fechada

    label_toplevel = customtkinter.CTkLabel(toplevel_window, text="Olá! Eu sou uma janela top-level super útil!")
    label_toplevel.pack(pady=30)

    # Adiciona um botão para fechar a janela top-level
    close_button = customtkinter.CTkButton(toplevel_window, text="Fechar", command=toplevel_window.destroy)
    close_button.pack(pady=10)

    app.wait_window(toplevel_window) # Espera a janela top-level ser fechada

customtkinter.set_appearance_mode("System")
customtkinter.set_default_color_theme("blue")

app = customtkinter.CTk()
app.geometry("400x250")
app.title("Janela Principal: O Quartel General")

button = customtkinter.CTkButton(app, text="Abrir Janela TopLevel", command=open_toplevel)
button.pack(pady=50)

app.mainloop()
                </code></pre><button class="copy-button bg-slate-600 hover:bg-slate-500 text-white" onclick="copyCode(this)">Copiar</button></div>
                <p class="mt-2 bg-sky-100 dark:bg-sky-900 p-3 rounded-md border-l-4 border-sky-500">💡 <strong>Dica Pro:</strong> <code>transient(app)</code> e <code>grab_set()</code> são ótimos para criar diálogos modais, onde o usuário precisa interagir com a janela pop-up antes de voltar para a principal. <code>app.wait_window(toplevel_window)</code> garante que o código da janela principal "espere" a top-level ser fechada.</p>
            `
        },
        "widget_label": {
            title: "2. CTkLabel",
            html: `
                <p>Seja para exibir um título, uma instrução ou uma mensagem de status, os rótulos são seus melhores amigos. E no CustomTkinter, eles vêm com um estilo impecável!</p>
                <div class="code-container relative my-4"><pre class="bg-slate-800 dark:bg-slate-900 text-white p-4 rounded-md overflow-x-auto"><code class="language-python">
import customtkinter

app = customtkinter.CTk()
app.geometry("300x200")
app.title("Rótulos com Estilo")

# 🌟 Rótulo Simples e Elegante
label1 = customtkinter.CTkLabel(app, text="Seja Bem-Vindo(a)!", font=customtkinter.CTkFont(size=18, weight="bold"))
label1.pack(pady=15)

# 💖 Rótulo com Cores e Borda Personalizadas
label2 = customtkinter.CTkLabel(app, text="Sua Jornada Começa Agora!",
                               font=customtkinter.CTkFont(size=14, slant="italic"),
                               text_color="#E74C3C", # Um vermelho vibrante!
                               fg_color="#FADBD8", # Fundo suave
                               corner_radius=10,
                               padx=10, pady=5)
label2.pack(pady=10)

app.mainloop()
                </code></pre><button class="copy-button bg-slate-600 hover:bg-slate-500 text-white" onclick="copyCode(this)">Copiar</button></div>
            `
        },
        "widget_button": {
            title: "3. CTkButton",
            html: `
                <p>Botões são o coração da interação! No CustomTkinter, eles não são apenas funcionais, mas também visualmente atraentes, com efeitos de hover e cantos arredondados que dão um toque profissional.</p>
                <div class="code-container relative my-4"><pre class="bg-slate-800 dark:bg-slate-900 text-white p-4 rounded-md overflow-x-auto"><code class="language-python">
import customtkinter

def show_message():
    print("🎉 Parabéns! Você clicou no botão! 🎉")
    # Poderíamos adicionar uma caixa de diálogo aqui, por exemplo!
    # messagebox.showinfo("Sucesso!", "Ação realizada com êxito!")

app = customtkinter.CTk()
app.geometry("400x200")
app.title("Botões Interativos")

# 🚀 Botão Principal: Chamando a Ação!
main_button = customtkinter.CTkButton(app, text="Iniciar Missão!",
                                      command=show_message,
                                      font=customtkinter.CTkFont(size=16, weight="bold"),
                                      fg_color="#2ECC71", # Verde esmeralda
                                      hover_color="#27AE60", # Verde mais escuro no hover
                                      corner_radius=15,
                                      width=200, height=50)
main_button.pack(pady=30)

# 💡 Botão Secundário: Uma Opção Alternativa
secondary_button = customtkinter.CTkButton(app, text="Saber Mais",
                                           command=lambda: print("Informações adicionais..."),
                                           fg_color="gray",
                                           hover_color="darkgray",
                                           text_color="white",
                                           corner_radius=10)
secondary_button.pack(pady=10)

app.mainloop()
                </code></pre><button class="copy-button bg-slate-600 hover:bg-slate-500 text-white" onclick="copyCode(this)">Copiar</button></div>
                <p class="mt-2 bg-sky-100 dark:bg-sky-900 p-3 rounded-md border-l-4 border-sky-500">💡 <strong>Dica Pro:</strong> Use <code>lambda</code> para passar argumentos para sua função de comando, ou para executar pequenas ações diretamente no <code>command</code>.</p>
            `
        },
        "widget_entry": {
            title: "4. CTkEntry",
            html: `
                <p>Precisa de um nome, um email, uma senha? O <code>CTkEntry</code> é a ferramenta perfeita para coletar informações do usuário, com um design limpo e moderno.</p>
                <div class="code-container relative my-4"><pre class="bg-slate-800 dark:bg-slate-900 text-white p-4 rounded-md overflow-x-auto"><code class="language-python">
import customtkinter

def get_user_input():
    user_text = entry.get()
    print(f"Você digitou: '{user_text}'")
    # Limpa a caixa de entrada após pegar o texto
    entry.delete(0, "end") # De 0 até o final

app = customtkinter.CTk()
app.geometry("400x250")
app.title("Entrada de Dados")

# 📝 Caixa de Entrada para Nome de Usuário
entry = customtkinter.CTkEntry(app, placeholder_text="Digite seu nome de usuário...",
                               width=250, height=40,
                               font=customtkinter.CTkFont(size=14),
                               corner_radius=10)
entry.pack(pady=30)

# 🔒 Caixa de Entrada para Senha (texto oculto!)
password_entry = customtkinter.CTkEntry(app, placeholder_text="Senha",
                                        show="*", # Oculta o texto digitado
                                        width=250, height=40,
                                        corner_radius=10)
password_entry.pack(pady=10)

button = customtkinter.CTkButton(app, text="Enviar Dados", command=get_user_input)
button.pack(pady=20)

app.mainloop()
                </code></pre><button class="copy-button bg-slate-600 hover:bg-slate-500 text-white" onclick="copyCode(this)">Copiar</button></div>
                 <p class="mt-2 bg-sky-100 dark:bg-sky-900 p-3 rounded-md border-l-4 border-sky-500">💡 <strong>Dica Pro:</strong> Use <code>show="*"</code> (ou qualquer outro caractere) para campos de senha, garantindo a privacidade do usuário.</p>
            `
        },
         "widget_textbox": {
            title: "5. CTkTextbox",
            html: `
                <p>Para textos longos, descrições ou até mesmo um editor de texto simples, o <code>CTkTextbox</code> é a escolha ideal. Ele suporta múltiplas linhas e rolagem automática.</p>
                <div class="code-container relative my-4"><pre class="bg-slate-800 dark:bg-slate-900 text-white p-4 rounded-md overflow-x-auto"><code class="language-python">
import customtkinter

def get_textbox_content():
    # Pegamos o conteúdo do início ("1.0") até o final, removendo a última quebra de linha ("end-1c")
    content = textbox.get("1.0", "end-1c")
    print(f"--- Conteúdo do seu Diário Secreto ---\\n{content}\\n--------------------------------------")

def clear_textbox():
    textbox.delete("1.0", "end")
    print("Caixa de texto limpa!")

app = customtkinter.CTk()
app.geometry("500x400")
app.title("Seu Bloco de Notas Pessoal")

# ✍️ Sua Área de Escrita
textbox = customtkinter.CTkTextbox(app, width=450, height=200,
                                   wrap="word", # Quebra as linhas por palavra, não por caractere
                                   font=customtkinter.CTkFont(size=13),
                                   corner_radius=10)
textbox.insert("1.0", "Bem-vindo(a) ao seu bloco de notas CustomTkinter!\\n\\n")
textbox.insert("end", "Sinta-se à vontade para escrever suas ideias, anotações ou até mesmo um poema.\\n")
textbox.insert("end", "A rolagem automática está pronta para você!")
textbox.pack(pady=20)

# 🎛️ Botões de Controle
button_frame = customtkinter.CTkFrame(app, fg_color="transparent") # Um frame transparente para organizar os botões
button_frame.pack(pady=10)

get_button = customtkinter.CTkButton(button_frame, text="Salvar Anotação", command=get_textbox_content)
get_button.pack(side="left", padx=10)

clear_button = customtkinter.CTkButton(button_frame, text="Limpar Tudo", command=clear_textbox, fg_color="red", hover_color="darkred")
clear_button.pack(side="right", padx=10)

app.mainloop()
                </code></pre><button class="copy-button bg-slate-600 hover:bg-slate-500 text-white" onclick="copyCode(this)">Copiar</button></div>
            `
        },
        "widget_checkbox": {
            title: "6. CTkCheckBox",
            html: `
                <p>Permita que os usuários selecionem múltiplas opções ou ativem/desativem funcionalidades com estilo.</p>
                <div class="code-container relative my-4"><pre class="bg-slate-800 dark:bg-slate-900 text-white p-4 rounded-md overflow-x-auto"><code class="language-python">
import customtkinter

def checkbox_event():
    # O valor é 1 se marcado, 0 se desmarcado (por padrão)
    print(f"Opção 'Receber Notificações' está: {'LIGADA' if checkbox_notifications.get() == 1 else 'DESLIGADA'}")
    print(f"Opção 'Concordo com os Termos' está: {'MARCADA' if checkbox_terms.get() else 'DESMARCADA'}")

app = customtkinter.CTk()
app.geometry("400x200")
app.title("Suas Preferências")

# ✅ Checkbox para Notificações
checkbox_notifications = customtkinter.CTkCheckBox(app, text="Receber Notificações por Email",
                                                   command=checkbox_event,
                                                   onvalue=1, offvalue=0) # Valores padrão, mas você pode mudar!
checkbox_notifications.pack(pady=15)

# 📄 Checkbox para Termos de Serviço
# Podemos usar uma variável Tkinter para controle mais explícito
terms_var = customtkinter.BooleanVar(value=False) # Inicia desmarcado
checkbox_terms = customtkinter.CTkCheckBox(app, text="Concordo com os Termos de Serviço",
                                           variable=terms_var, # Liga a variável ao checkbox
                                           command=checkbox_event,
                                           checkbox_width=20, checkbox_height=20) # Ajusta o tamanho
checkbox_terms.pack(pady=10)

app.mainloop()
                </code></pre><button class="copy-button bg-slate-600 hover:bg-slate-500 text-white" onclick="copyCode(this)">Copiar</button></div>
                 <p class="mt-2 bg-sky-100 dark:bg-sky-900 p-3 rounded-md border-l-4 border-sky-500">💡 <strong>Dica Pro:</strong> Usar <code>BooleanVar</code> é super prático para checkboxes, pois ele já trabalha com <code>True</code>/<code>False</code> (ou 1/0).</p>
            `
        },
        "widget_radiobutton": {
            title: "7. CTkRadioButton",
            html: `
                <p>Quando você precisa que o usuário escolha apenas UMA opção de um grupo, os Radio Buttons são a solução elegante.</p>
                <div class="code-container relative my-4"><pre class="bg-slate-800 dark:bg-slate-900 text-white p-4 rounded-md overflow-x-auto"><code class="language-python">
import customtkinter

def radiobutton_event():
    print(f"Seu método de pagamento preferido é: {payment_method.get()}")

app = customtkinter.CTk()
app.geometry("400x250")
app.title("Escolha Seu Método de Pagamento")

# 💰 Variável para armazenar a escolha do usuário
payment_method = customtkinter.StringVar(value="Cartão de Crédito") # Valor inicial

# 💳 Opção 1: Cartão de Crédito
radiobutton1 = customtkinter.CTkRadioButton(app, text="Cartão de Crédito",
                                             variable=payment_method, value="Cartão de Crédito",
                                             command=radiobutton_event,
                                             font=customtkinter.CTkFont(size=14))
radiobutton1.pack(pady=10)

# 💸 Opção 2: Boleto Bancário
radiobutton2 = customtkinter.CTkRadioButton(app, text="Boleto Bancário",
                                             variable=payment_method, value="Boleto Bancário",
                                             command=radiobutton_event,
                                             font=customtkinter.CTkFont(size=14))
radiobutton2.pack(pady=10)

# 📱 Opção 3: Pix
radiobutton3 = customtkinter.CTkRadioButton(app, text="Pix",
                                             variable=payment_method, value="Pix",
                                             command=radiobutton_event,
                                             font=customtkinter.CTkFont(size=14))
radiobutton3.pack(pady=10)

# Exibe a escolha atual (opcional)
current_choice_label = customtkinter.CTkLabel(app, textvariable=payment_method,
                                               font=customtkinter.CTkFont(size=12, weight="bold"))
current_choice_label.pack(pady=20)

app.mainloop()
                </code></pre><button class="copy-button bg-slate-600 hover:bg-slate-500 text-white" onclick="copyCode(this)">Copiar</button></div>
                 <p class="mt-2 bg-sky-100 dark:bg-sky-900 p-3 rounded-md border-l-4 border-sky-500">💡 <strong>Dica Pro:</strong> Todos os radio buttons de um grupo devem compartilhar a mesma <code>variable</code> para que apenas um possa ser selecionado por vez.</p>
            `
        },
        "widget_combobox": {
            title: "8. CTkComboBox",
            html: `
                <p>Uma forma compacta e elegante de oferecer uma lista de opções ao usuário. Perfeito para seleção de categorias, idiomas ou estados.</p>
                <div class="code-container relative my-4"><pre class="bg-slate-800 dark:bg-slate-900 text-white p-4 rounded-md overflow-x-auto"><code class="language-python">
import customtkinter

def combobox_callback(choice):
    print(f"Você escolheu: {choice}")
    status_label.configure(text=f"Status: {choice} selecionado!")

app = customtkinter.CTk()
app.geometry("400x200")
app.title("Seletor de Opções")

# 🌍 Lista de Idiomas
languages = ["Português", "English", "Español", "Français", "Deutsch"]

# 🔽 O Combobox da Escolha
combobox = customtkinter.CTkComboBox(app,
                                     values=languages,
                                     command=combobox_callback,
                                     width=200, height=35,
                                     font=customtkinter.CTkFont(size=14),
                                     corner_radius=10)
combobox.set("Selecione um Idioma") # Texto inicial antes da seleção
combobox.pack(pady=30)

# 💡 Rótulo de Status para feedback
status_label = customtkinter.CTkLabel(app, text="Status: Nenhum idioma selecionado.",
                                      font=customtkinter.CTkFont(size=12, italic=True))
status_label.pack(pady=10)

app.mainloop()
                </code></pre><button class="copy-button bg-slate-600 hover:bg-slate-500 text-white" onclick="copyCode(this)">Copiar</button></div>
                 <p class="mt-2 bg-sky-100 dark:bg-sky-900 p-3 rounded-md border-l-4 border-sky-500">💡 <strong>Dica Pro:</strong> O <code>set()</code> é ótimo para definir um valor padrão ou um texto de "placeholder" antes da seleção.</p>
            `
        },
        "widget_slider": {
            title: "9. CTkSlider",
            html: `
                <p>Ideal para ajustar volumes, brilho, zoom ou qualquer valor numérico dentro de um intervalo. A interface é suave e responsiva.</p>
                <div class="code-container relative my-4"><pre class="bg-slate-800 dark:bg-slate-900 text-white p-4 rounded-md overflow-x-auto"><code class="language-python">
import customtkinter

def slider_event(value):
    # Arredondamos o valor para um número inteiro para melhor visualização
    current_value = int(value)
    print(f"Nível de Volume: {current_value}%")
    volume_label.configure(text=f"Volume: {current_value}%")

app = customtkinter.CTk()
app.geometry("400x200")
app.title("Controle de Volume")

# 🔊 Slider de Volume
slider = customtkinter.CTkSlider(app, from_=0, to=100, # De 0 a 100
                                 command=slider_event,
                                 orientation="horizontal", # Pode ser "vertical" também!
                                 number_of_steps=100, # Permite 100 passos discretos
                                 width=300, height=20,
                                 fg_color="gray", progress_color="blue") # Cores da barra
slider.set(50) # Inicia no meio (50%)
slider.pack(pady=30)

# 📊 Rótulo para exibir o valor atual
volume_label = customtkinter.CTkLabel(app, text="Volume: 50%",
                                      font=customtkinter.CTkFont(size=16, weight="bold"))
volume_label.pack(pady=10)

app.mainloop()
                </code></pre><button class="copy-button bg-slate-600 hover:bg-slate-500 text-white" onclick="copyCode(this)">Copiar</button></div>
                 <p class="mt-2 bg-sky-100 dark:bg-sky-900 p-3 rounded-md border-l-4 border-sky-500">💡 <strong>Dica Pro:</strong> <code>number_of_steps</code> controla a granularidade do slider. Se for <code>None</code> (padrão), ele será contínuo.</p>
            `
        },
        "widget_progressbar": {
            title: "10. CTkProgressBar",
            html: `
                <p>Mantenha o usuário informado sobre o progresso de tarefas demoradas. O CustomTkinter oferece barras de progresso determinadas (com um valor específico) e indeterminadas (para carregamentos).</p>
                <div class="code-container relative my-4"><pre class="bg-slate-800 dark:bg-slate-900 text-white p-4 rounded-md overflow-x-auto"><code class="language-python">
import customtkinter
import time

def start_task():
    # Simula uma tarefa demorada
    progressbar.set(0) # Zera o progresso
    for i in range(101):
        time.sleep(0.02) # Pequena pausa para simular trabalho
        progressbar.set(i / 100) # Atualiza o progresso (de 0.0 a 1.0)
        app.update_idletasks() # Força a atualização da UI

    print("Tarefa Concluída!")
    progressbar_indeterminate.stop() # Para a animação indeterminada
    status_label.configure(text="Status: Tarefa Concluída!")

app = customtkinter.CTk()
app.geometry("450x250")
app.title("Monitor de Progresso")

# 📈 Barra de Progresso Determinada (com valor)
progressbar = customtkinter.CTkProgressBar(app, orientation="horizontal", width=350, height=15)
progressbar.set(0) # Começa em 0%
progressbar.pack(pady=20)

# 🔄 Barra de Progresso Indeterminada (animação de carregamento)
progressbar_indeterminate = customtkinter.CTkProgressBar(app, mode="indeterminate", width=350, height=15)
progressbar_indeterminate.pack(pady=10)
progressbar_indeterminate.start() # Inicia a animação!

# ℹ️ Rótulo de Status
status_label = customtkinter.CTkLabel(app, text="Status: Aguardando...",
                                      font=customtkinter.CTkFont(size=12, italic=True))
status_label.pack(pady=10)

# 🚀 Botão para Iniciar a Simulação
start_button = customtkinter.CTkButton(app, text="Iniciar Tarefa", command=start_task)
start_button.pack(pady=20)

app.mainloop()
                </code></pre><button class="copy-button bg-slate-600 hover:bg-slate-500 text-white" onclick="copyCode(this)">Copiar</button></div>
                 <p class="mt-2 bg-sky-100 dark:bg-sky-900 p-3 rounded-md border-l-4 border-sky-500">💡 <strong>Dica Pro:</strong> <code>app.update_idletasks()</code> é crucial para que a barra de progresso seja atualizada visualmente durante uma operação longa, evitando que a UI "congele".</p>
            `
        },
        "widget_frame": {
            title: "11. CTkFrame",
            html: `
                <p>Frames são como "caixas" invisíveis que ajudam a agrupar e organizar outros widgets. Essenciais para criar layouts complexos e manter seu código limpo e modular.</p>
                <div class="code-container relative my-4"><pre class="bg-slate-800 dark:bg-slate-900 text-white p-4 rounded-md overflow-x-auto"><code class="language-python">
import customtkinter

app = customtkinter.CTk()
app.geometry("500x400")
app.title("Organizando com Frames")

# 📦 Frame Principal de Login
login_frame = customtkinter.CTkFrame(app, width=350, height=250,
                                     fg_color="gray20", # Um cinza escuro para o frame
                                     corner_radius=15,
                                     border_width=2, border_color="blue")
login_frame.pack(pady=50, padx=50, fill="both", expand=True) # Centraliza e expande

# 👤 Rótulo e Entrada de Usuário dentro do Frame
username_label = customtkinter.CTkLabel(login_frame, text="Usuário:", font=customtkinter.CTkFont(size=14, weight="bold"))
username_label.pack(pady=(30, 5)) # Mais padding no topo

username_entry = customtkinter.CTkEntry(login_frame, placeholder_text="Digite seu usuário", width=200)
username_entry.pack(pady=5)

# 🔑 Rótulo e Entrada de Senha dentro do Frame
password_label = customtkinter.CTkLabel(login_frame, text="Senha:", font=customtkinter.CTkFont(size=14, weight="bold"))
password_label.pack(pady=5)

password_entry = customtkinter.CTkEntry(login_frame, placeholder_text="Digite sua senha", show="*", width=200)
password_entry.pack(pady=5)

# ➡️ Botão de Login
login_button = customtkinter.CTkButton(login_frame, text="Entrar", command=lambda: print("Tentando logar..."),
                                       fg_color="green", hover_color="darkgreen")
login_button.pack(pady=20)

app.mainloop()
                </code></pre><button class="copy-button bg-slate-600 hover:bg-slate-500 text-white" onclick="copyCode(this)">Copiar</button></div>
                 <p class="mt-2 bg-sky-100 dark:bg-sky-900 p-3 rounded-md border-l-4 border-sky-500">💡 <strong>Dica Pro:</strong> Use <code>fg_color="transparent"</code> para frames que servem apenas para organização de layout, sem um fundo visível.</p>
            `
        },
        "widget_switch": {
            title: "12. CTkSwitch",
            html: `
                <p>Uma alternativa moderna e intuitiva para checkboxes, ideal para configurações de "ligar e desligar".</p>
                <div class="code-container relative my-4"><pre class="bg-slate-800 dark:bg-slate-900 text-white p-4 rounded-md overflow-x-auto"><code class="language-python">
import customtkinter

def switch_event():
    if theme_switch_var.get() == 1:
        customtkinter.set_appearance_mode("Dark")
        print("Modo Escuro Ativado!")
    else:
        customtkinter.set_appearance_mode("Light")
        print("Modo Claro Ativado!")

app = customtkinter.CTk()
app.geometry("400x200")
app.title("Configurações de Tema")

# 💡 Variável para o Switch
theme_switch_var = customtkinter.IntVar(value=0) # 0 para desligado (Light), 1 para ligado (Dark)

# 🌗 O Switch Mágico!
theme_switch = customtkinter.CTkSwitch(app, text="Ativar Modo Escuro",
                                       command=switch_event,
                                       variable=theme_switch_var,
                                       onvalue=1, offvalue=0, # Valores que o switch retorna
                                       font=customtkinter.CTkFont(size=15))
theme_switch.pack(pady=50)

app.mainloop()
                </code></pre><button class="copy-button bg-slate-600 hover:bg-slate-500 text-white" onclick="copyCode(this)">Copiar</button></div>
                 <p class="mt-2 bg-sky-100 dark:bg-sky-900 p-3 rounded-md border-l-4 border-sky-500">💡 <strong>Dica Pro:</strong> Você pode ligar o <code>command</code> do switch a uma função que altera o <code>set_appearance_mode()</code> para criar um seletor de tema dinâmico!</p>
            `
        },
        "widget_scrollableframe": {
            title: "13. CTkScrollableFrame",
            html: `
                <p>Quando você tem muito conteúdo para exibir e não quer que ele transborde, um frame rolável é a solução perfeita.</p>
                <div class="code-container relative my-4"><pre class="bg-slate-800 dark:bg-slate-900 text-white p-4 rounded-md overflow-x-auto"><code class="language-python">
import customtkinter

app = customtkinter.CTk()
app.geometry("500x500")
app.title("Galeria de Conteúdo Rolável")

# 🏞️ O Frame Rolável: Sua Galeria Infinita
scrollable_frame = customtkinter.CTkScrollableFrame(app, width=450, height=400,
                                                     fg_color="gray80", # Um cinza claro para o fundo
                                                     corner_radius=15,
                                                     scrollbar_button_color="blue", # Cor do botão da scrollbar
                                                     scrollbar_button_hover_color="darkblue")
scrollable_frame.pack(pady=20, padx=20, fill="both", expand=True)

# 🖼️ Adicionando Muitos Itens para Testar a Rolagem
for i in range(25): # Vamos adicionar 25 itens!
    item_text = f"Item da Galeria {i+1}: Uma imagem ou texto interessante..."
    customtkinter.CTkLabel(scrollable_frame, text=item_text,
                           font=customtkinter.CTkFont(size=14),
                           fg_color="gray90", # Fundo para cada item
                           corner_radius=8,
                           padx=10, pady=10).pack(pady=5, fill="x") # Preenche a largura do frame

app.mainloop()
                </code></pre><button class="copy-button bg-slate-600 hover:bg-slate-500 text-white" onclick="copyCode(this)">Copiar</button></div>
                <p class="mt-2 bg-sky-100 dark:bg-sky-900 p-3 rounded-md border-l-4 border-sky-500">💡 <strong>Dica Pro:</strong> Use <code>fill="x"</code> ou <code>fill="y"</code> (e <code>expand=True</code>) nos widgets dentro do <code>CTkScrollableFrame</code> para que eles se ajustem ao tamanho do frame.</p>
            `
        },
        "layouts": {
            title: "🎼 Seção 4: O Maestro do Layout – Gerenciadores de Geometria",
            html: `
                <p>Posicionar seus widgets de forma harmoniosa é uma arte! O CustomTkinter (assim como o Tkinter) oferece três "maestros" para orquestrar o layout da sua interface.</p>
                <h4 class="text-xl font-medium mt-6 mb-2">1. <code>pack()</code>: O Empacotador Simples e Eficaz</h4>
                <p>Pense no <code>pack()</code> como um organizador de caixas. Ele empilha ou coloca seus widgets lado a lado, de forma sequencial. Ótimo para layouts lineares ou quando você quer algo rápido e direto.</p>
                <div class="code-container relative my-4"><pre class="bg-slate-800 dark:bg-slate-900 text-white p-4 rounded-md overflow-x-auto"><code class="language-python">
import customtkinter

app = customtkinter.CTk()
app.geometry("500x300")
app.title("Layout com pack(): Simples e Direto")

# ⬅️ Botão à Esquerda
btn1 = customtkinter.CTkButton(app, text="Esquerda", fg_color="purple", hover_color="darkorchid")
btn1.pack(side="left", padx=10, pady=10, ipadx=10, ipady=10) # Espaçamento interno e externo

# ➡️ Botão à Direita
btn2 = customtkinter.CTkButton(app, text="Direita", fg_color="orange", hover_color="darkorange")
btn2.pack(side="right", padx=10, pady=10, ipadx=10, ipady=10)

# ⬆️ Rótulo no Topo (padrão)
label = customtkinter.CTkLabel(app, text="No Topo (padrão do pack)", fg_color="gray", corner_radius=5)
label.pack(pady=20, fill="x", expand=True) # Preenche horizontalmente e expande

# ⬇️ Botão no Fundo
btn3 = customtkinter.CTkButton(app, text="Fundo", fg_color="teal", hover_color="darkcyan")
btn3.pack(side="bottom", pady=10, fill="x") # Preenche horizontalmente

app.mainloop()
                </code></pre><button class="copy-button bg-slate-600 hover:bg-slate-500 text-white" onclick="copyCode(this)">Copiar</button></div>
                <p class="mt-2 bg-sky-100 dark:bg-sky-900 p-3 rounded-md border-l-4 border-sky-500">💡 <strong>Dica Pro:</strong> <code>fill</code> e <code>expand</code> são poderosos para fazer seus widgets se adaptarem ao espaço disponível.</p>

                <h4 class="text-xl font-medium mt-6 mb-2">2. <code>grid()</code>: A Grade Perfeita para Organização</h4>
                <p>Se você pensa em linhas e colunas, o <code>grid()</code> é seu melhor amigo! Ele organiza seus widgets em uma grade imaginária, dando um controle preciso sobre o posicionamento. Ideal para formulários complexos e layouts tabulares.</p>
                <div class="code-container relative my-4"><pre class="bg-slate-800 dark:bg-slate-900 text-white p-4 rounded-md overflow-x-auto"><code class="language-python">
import customtkinter

app = customtkinter.CTk()
app.geometry("600x400")
app.title("Layout com grid(): Precisão e Organização")

# 📐 Configurando o Peso das Linhas e Colunas: A Chave da Responsividade!
# Isso faz com que as linhas e as colunas se expandam quando a janela é redimensionada.
app.grid_rowconfigure(0, weight=1) # Linha 0 pode expandir
app.grid_rowconfigure(1, weight=1) # Linha 1 pode expandir
app.grid_rowconfigure(2, weight=1) # Linha 2 pode expandir
app.grid_columnconfigure(0, weight=1) # Coluna 0 pode expandir
app.grid_columnconfigure(1, weight=3) # Coluna 1 expande 3 vezes mais que a coluna 0

# 📝 Formulário de Cadastro
label_nome = customtkinter.CTkLabel(app, text="Nome Completo:", font=customtkinter.CTkFont(size=14))
label_nome.grid(row=0, column=0, padx=15, pady=15, sticky="e") # "e" para alinhar à direita na célula

entry_nome = customtkinter.CTkEntry(app, placeholder_text="Seu nome aqui...", width=250)
entry_nome.grid(row=0, column=1, padx=15, pady=15, sticky="ew") # "ew" para expandir horizontalmente

label_email = customtkinter.CTkLabel(app, text="Email:", font=customtkinter.CTkFont(size=14))
label_email.grid(row=1, column=0, padx=15, pady=15, sticky="e")

entry_email = customtkinter.CTkEntry(app, placeholder_text="seu.email@exemplo.com", width=250)
entry_email.grid(row=1, column=1, padx=15, pady=15, sticky="ew")

# 🚀 Botão de Envio (abrangendo 2 colunas)
button_submit = customtkinter.CTkButton(app, text="Registrar",
                                        fg_color="darkblue", hover_color="blue")
button_submit.grid(row=2, column=0, columnspan=2, pady=20) # columnspan faz o botão ocupar 2 colunas

app.mainloop()
                </code></pre><button class="copy-button bg-slate-600 hover:bg-slate-500 text-white" onclick="copyCode(this)">Copiar</button></div>
                <p class="mt-2 bg-sky-100 dark:bg-sky-900 p-3 rounded-md border-l-4 border-sky-500">💡 <strong>Dica Pro:</strong> O <code>sticky</code> é essencial para controlar como o widget se comporta dentro da sua célula. Use <code>"nswe"</code> para que ele preencha a célula inteira.</p>

                <h4 class="text-xl font-medium mt-6 mb-2">3. <code>place()</code>: O Posicionamento Absoluto para Controle Total</h4>
                 <p>Para aqueles momentos em que você precisa de controle pixel a pixel, o <code>place()</code> é a ferramenta. Ele posiciona widgets em coordenadas absolutas ou relativas. Use com moderação para layouts responsivos, mas é perfeito para elementos específicos ou sobreposições.</p>
                <div class="code-container relative my-4"><pre class="bg-slate-800 dark:bg-slate-900 text-white p-4 rounded-md overflow-x-auto"><code class="language-python">
import customtkinter

app = customtkinter.CTk()
app.geometry("600x400")
app.title("Layout com place(): Controle Absoluto")

# 🎯 Botão no Canto Superior Esquerdo (coordenadas absolutas)
button1 = customtkinter.CTkButton(app, text="Canto Superior", fg_color="red")
button1.place(x=30, y=30)

# 🌟 Rótulo no Centro da Janela (coordenadas relativas)
label_center = customtkinter.CTkLabel(app, text="Estou no Centro!",
                                      font=customtkinter.CTkFont(size=18, weight="bold"),
                                      fg_color="green", corner_radius=10)
label_center.place(relx=0.5, rely=0.5, anchor="center") # relx/rely de 0.0 a 1.0, anchor="center" centraliza

# 📦 Frame no Canto Inferior Direito (relativo com tamanho relativo)
bottom_right_frame = customtkinter.CTkFrame(app, fg_color="blue", corner_radius=10)
bottom_right_frame.place(relx=0.95, rely=0.95, relwidth=0.3, relheight=0.2, anchor="se") # "se" para sudeste

label_in_frame = customtkinter.CTkLabel(bottom_right_frame, text="Dentro do Frame", text_color="white")
label_in_frame.pack(expand=True) # Faz o rótulo preencher o frame

app.mainloop()
                </code></pre><button class="copy-button bg-slate-600 hover:bg-slate-500 text-white" onclick="copyCode(this)">Copiar</button></div>
                <p class="mt-2 bg-sky-100 dark:bg-sky-900 p-3 rounded-md border-l-4 border-sky-500">💡 <strong>Dica Pro:</strong> <code>relx</code>, <code>rely</code>, <code>relwidth</code>, <code>relheight</code> são úteis para manter o posicionamento proporcional ao tamanho da janela, mesmo com <code>place()</code>.</p>
            `
        },
        "events_vars": {
            title: "💃 Seção 5: A Dança da Interação – Eventos e Variáveis Tkinter",
            html: `
                <p>Sua aplicação não é apenas bonita, ela é viva! Ela responde aos toques e digitações do usuário graças a eventos e variáveis.</p>
                <h4 class="text-xl font-medium mt-6 mb-2">⚡ Manipulação de Eventos: Dando Vida à Sua Aplicação</h4>
                <p><strong>Argumento <code>command</code></strong>: A forma mais direta e elegante de conectar um botão (ou checkbox, radio button, slider, combobox) a uma função. É como dar uma ordem clara: "Quando clicarem em mim, execute ISSO!"</p>
                <div class="code-container relative my-4"><pre class="bg-slate-800 dark:bg-slate-900 text-white p-4 rounded-md overflow-x-auto"><code class="language-python">
import customtkinter

def perform_action():
    print("Ação performada com sucesso!")

app = customtkinter.CTk()
app.geometry("300x150")

action_button = customtkinter.CTkButton(app, text="Executar Ação", command=perform_action)
action_button.pack(pady=50)

app.mainloop()
                </code></pre><button class="copy-button bg-slate-600 hover:bg-slate-500 text-white" onclick="copyCode(this)">Copiar</button></div>

                <p class="mt-4"><strong>Método <code>bind()</code></strong>: Para um controle mais granular! Quer saber quando o mouse se move, uma tecla é pressionada, ou a janela é redimensionada? O <code>bind()</code> é seu espião de eventos!</p>
                <div class="code-container relative my-4"><pre class="bg-slate-800 dark:bg-slate-900 text-white p-4 rounded-md overflow-x-auto"><code class="language-python">
import customtkinter

def on_key_press(event):
    print(f"Teclou: '{event.keysym}' (Código: {event.keycode})")
    if event.keysym == "Return": # Se a tecla Enter for pressionada
        print("Você pressionou ENTER!")

def on_mouse_click(event):
    print(f"Clique do mouse em X:{event.x}, Y:{event.y} (Botão: {event.num})")
    if event.num == 1: # Botão esquerdo
        print("Clique Esquerdo!")

app = customtkinter.CTk()
app.geometry("500x300")
app.title("Eventos em Ação!")

# ⌨️ Ligando Eventos à Janela Inteira
app.bind("<Key>", on_key_press) # Qualquer tecla pressionada
app.bind("<Button-1>", on_mouse_click) # Clique do botão esquerdo do mouse

# 🖱️ Ligando Eventos a um Widget Específico
clickable_label = customtkinter.CTkLabel(app, text="Clique ou Arraste-me!",
                                           fg_color="lightblue", corner_radius=10,
                                           width=200, height=50)
clickable_label.pack(pady=50)

def on_label_enter(event):
    clickable_label.configure(text_color="purple") # Muda a cor do texto ao passar o mouse
def on_label_leave(event):
    clickable_label.configure(text_color="black") # Volta a cor normal ao sair
def on_label_drag(event):
    print(f"Arrastando o rótulo para X:{event.x}, Y:{event.y}")

clickable_label.bind("<Enter>", on_label_enter) # Mouse entrou no widget
clickable_label.bind("<Leave>", on_label_leave) # Mouse saiu do widget
clickable_label.bind("<B1-Motion>", on_label_drag) # Botão esquerdo pressionado e arrastando

app.mainloop()
                </code></pre><button class="copy-button bg-slate-600 hover:bg-slate-500 text-white" onclick="copyCode(this)">Copiar</button></div>
                <p class="mt-2 bg-sky-100 dark:bg-sky-900 p-3 rounded-md border-l-4 border-sky-500">💡 <strong>Dica Pro:</strong> O objeto <code>event</code> passado para a função de callback contém informações valiosas como <code>x</code>, <code>y</code> (posição do mouse), <code>keysym</code> (nome da tecla), <code>num</code> (número do botão do mouse), etc.</p>

                <h4 class="text-xl font-medium mt-6 mb-2">🔄 Variáveis do Tkinter: O Coração Dinâmico da Sua UI</h4>
                <p>Essas variáveis especiais (<code>StringVar</code>, <code>IntVar</code>, <code>DoubleVar</code>, <code>BooleanVar</code>) são como um "fio invisível" que conecta seus dados aos seus widgets. Quando a variável muda, o widget se atualiza automaticamente, e vice-versa!</p>
                <ul class="list-disc list-inside space-y-1 mt-2">
                    <li><code>StringVar()</code>: Para textos e strings.</li>
                    <li><code>IntVar()</code>: Para números inteiros.</li>
                    <li><code>DoubleVar()</code>: Para números decimais.</li>
                    <li><code>BooleanVar()</code>: Para valores <code>True</code>/<code>False</code>.</li>
                </ul>
                <div class="code-container relative my-4"><pre class="bg-slate-800 dark:bg-slate-900 text-white p-4 rounded-md overflow-x-auto"><code class="language-python">
import customtkinter

def update_display(*args): # O *args é para capturar argumentos extras do trace
    # Esta função é chamada sempre que 'my_text_var' muda!
    display_label.configure(text=f"Conteúdo Atual: {my_text_var.get()}")
    if my_int_var.get() > 50:
        print("Valor inteiro alto!")

app = customtkinter.CTk()
app.geometry("500x300")
app.title("Variáveis Dinâmicas")

# 📝 Variável de Texto
my_text_var = customtkinter.StringVar(value="Olá, CustomTkinter!")
my_text_var.trace("w", update_display) # "w" significa "write" (escrita)

entry_field = customtkinter.CTkEntry(app, textvariable=my_text_var, width=300,
                                     placeholder_text="Digite algo aqui...")
entry_field.pack(pady=20)

display_label = customtkinter.CTkLabel(app, text="", font=customtkinter.CTkFont(size=16, weight="bold"))
display_label.pack(pady=10)

# 🔢 Variável Inteira
my_int_var = customtkinter.IntVar(value=25)
my_int_var.trace("w", update_display) # Também rastreamos mudanças aqui

int_slider = customtkinter.CTkSlider(app, from_=0, to=100, variable=my_int_var, width=300)
int_slider.pack(pady=10)

# 🚦 Variável Booleana
my_bool_var = customtkinter.BooleanVar(value=True)
my_bool_var.trace("w", lambda *args: print(f"Status Booleano: {my_bool_var.get()}"))

bool_switch = customtkinter.CTkSwitch(app, text="Ativar/Desativar", variable=my_bool_var)
bool_switch.pack(pady=10)

app.mainloop()
                </code></pre><button class="copy-button bg-slate-600 hover:bg-slate-500 text-white" onclick="copyCode(this)">Copiar</button></div>
                <p class="mt-2 bg-sky-100 dark:bg-sky-900 p-3 rounded-md border-l-4 border-sky-500">💡 <strong>Dica Pro:</strong> O método <code>trace()</code> é incrivelmente útil para executar uma função sempre que o valor de uma variável muda. Isso permite criar interfaces altamente reativas.</p>
            `
        },
        "customization": {
            title: "🎨 Seção 6: O Toque Pessoal – Widgets Avançados e Personalização",
            html: `
                <p>Sua aplicação merece ser única! O CustomTkinter te dá as ferramentas para personalizar cada detalhe, desde as cores até as fontes e imagens.</p>
                <ul class="list-disc list-inside space-y-1 mt-2">
                    <li><strong>Cores:</strong> Use nomes de cores (<code>"red"</code>, <code>"blue"</code>) ou os poderosos códigos hexadecimais (<code>"#FF5733"</code> - laranja vibrante!).</li>
                    <li><strong>Fontes:</strong> Com <code>customtkinter.CTkFont()</code>, você controla o tipo, tamanho, peso (negrito), inclinação (itálico) e muito mais!</li>
                </ul>
                <div class="code-container relative my-4"><pre class="bg-slate-800 dark:bg-slate-900 text-white p-4 rounded-md overflow-x-auto"><code class="language-python">
import customtkinter

app = customtkinter.CTk()
app.geometry("500x350")
app.title("Personalização Extrema!")

# ✒️ Minha Fonte Super Estilosa
my_custom_font = customtkinter.CTkFont(family="Montserrat", size=20, weight="bold", slant="italic")

# 🌟 Rótulo Brilhante!
fancy_label = customtkinter.CTkLabel(app, text="Design Incrível!",
                                     font=my_custom_font,
                                     text_color="#FFD700", # Dourado!
                                     fg_color="#4B0082", # Índigo escuro
                                     corner_radius=15,
                                     padx=20, pady=15)
fancy_label.pack(pady=30)

# 🚀 Botão Futurista!
futuristic_button = customtkinter.CTkButton(app, text="Explorar!",
                                            font=customtkinter.CTkFont(family="Arial", size=16, weight="bold"),
                                            fg_color=("#3498DB", "#2980B9"), # Azul claro para light, azul mais escuro para dark
                                            hover_color=("#2ECC71", "#27AE60"), # Verde no hover!
                                            text_color="white",
                                            border_width=3,
                                            border_color="#F1C40F", # Amarelo vibrante na borda
                                            corner_radius=25,
                                            width=250, height=60)
futuristic_button.pack(pady=20)

# 💡 Switch com Cores Personalizadas
custom_switch = customtkinter.CTkSwitch(app, text="Modo Turbo",
                                        button_color="red", # Cor do botão do switch
                                        button_hover_color="darkred",
                                        progress_color="green", # Cor da barra de progresso
                                        fg_color="gray", # Cor de fundo do switch
                                        font=customtkinter.CTkFont(size=14))
custom_switch.pack(pady=20)

app.mainloop()
                </code></pre><button class="copy-button bg-slate-600 hover:bg-slate-500 text-white" onclick="copyCode(this)">Copiar</button></div>
                <p class="mt-2 bg-sky-100 dark:bg-sky-900 p-3 rounded-md border-l-4 border-sky-500">💡 <strong>Dica Pro:</strong> Para cores que se adaptam ao tema, você pode passar uma tupla <code>(cor_claro, cor_escuro)</code> para argumentos como <code>fg_color</code>.</p>

                <h4 class="text-xl font-medium mt-6 mb-2">🖼️ Adicionando Imagens: O Toque Visual que Encanta!</h4>
                <p>Uma imagem vale mais que mil palavras! Integre ícones, logos e gráficos para tornar sua interface mais rica e intuitiva.</p>
                <div class="code-container relative my-4"><pre class="bg-slate-800 dark:bg-slate-900 text-white p-4 rounded-md overflow-x-auto"><code class="language-python">
import customtkinter
from PIL import Image # Necessário para manipular imagens

app = customtkinter.CTk()
app.geometry("500x400")
app.title("Imagens que Falam!")

# ⚠️ IMPORTANTE: Certifique-se de ter um arquivo 'icon.png' (ou qualquer imagem)
# no mesmo diretório do seu script, ou forneça o caminho completo para uma imagem existente.
# Para este exemplo, vamos usar um placeholder se a imagem não for encontrada.

try:
    # 🌟 Carregando e Redimensionando sua Imagem (para ícones, etc.)
    # Exemplo: image_path = "caminho/para/seu/logo.png"
    # Vamos criar uma imagem de placeholder para garantir que o exemplo funcione.
    # Em uma aplicação real, você teria seus próprios arquivos de imagem.
    # Vamos simular um ícone de 'home' e um de 'configurações'.

    # Criando um ícone de 'home' simples (substitua pelo seu arquivo real)
    # Se você tiver um arquivo 'home_icon.png', use Image.open('home_icon.png')
    # Caso contrário, este é um placeholder:
    try:
        home_img_light = Image.open("home_icon_light.png").resize((24, 24))
        home_img_dark = Image.open("home_icon_dark.png").resize((24, 24))
    except FileNotFoundError:
        print("Aviso: 'home_icon_light.png' ou 'home_icon_dark.png' não encontrados. Usando placeholder.")
        # Criando um placeholder simples (um quadrado colorido)
        home_img_light = Image.new('RGB', (24, 24), color = 'skyblue')
        home_img_dark = Image.new('RGB', (24, 24), color = 'darkblue')

    home_icon = customtkinter.CTkImage(light_image=home_img_light,
                                       dark_image=home_img_dark,
                                       size=(24, 24))

    # ⚙️ Criando um ícone de 'configurações' (substitua pelo seu arquivo real)
    try:
        settings_img = Image.open("settings_icon.png").resize((24, 24))
    except FileNotFoundError:
        print("Aviso: 'settings_icon.png' não encontrado. Usando placeholder.")
        settings_img = Image.new('RGB', (24, 24), color = 'gray')

    settings_icon = customtkinter.CTkImage(light_image=settings_img,
                                           dark_image=settings_img, # Pode ser a mesma imagem
                                           size=(24, 24))

    # 🏠 Rótulo com Ícone de Casa
    label_with_icon = customtkinter.CTkLabel(app, text="Página Inicial",
                                             image=home_icon, compound="left", # Ícone à esquerda do texto
                                             font=customtkinter.CTkFont(size=16, weight="bold"))
    label_with_icon.pack(pady=30)

    # ⚙️ Botão com Ícone de Configurações
    settings_button = customtkinter.CTkButton(app, text="Configurações",
                                              image=settings_icon, compound="left",
                                              fg_color="purple", hover_color="darkorchid",
                                              font=customtkinter.CTkFont(size=14))
    settings_button.pack(pady=20)

    # 🖼️ Exibindo uma Imagem Maior (como um banner)
    try:
        banner_img = Image.open("banner_image.png").resize((400, 150))
    except FileNotFoundError:
        print("Aviso: 'banner_image.png' não encontrado. Usando placeholder.")
        banner_img = Image.new('RGB', (400, 150), color = 'lightgray')
        # Adiciona um texto ao placeholder
        from PIL import ImageDraw, ImageFont
        d = ImageDraw.Draw(banner_img)
        try:
            # Tenta carregar uma fonte padrão do sistema
            font = ImageFont.truetype("arial.ttf", 20)
        except IOError:
            # Se a fonte não for encontrada, usa a fonte padrão do PIL
            font = ImageFont.load_default()
        d.text((50, 60), "Banner de Exemplo", fill=(0,0,0), font=font)

    banner_photo = customtkinter.CTkImage(light_image=banner_img,
                                          dark_image=banner_img,
                                          size=(400, 150))

    banner_label = customtkinter.CTkLabel(app, image=banner_photo, text="") # Sem texto, só a imagem
    banner_label.pack(pady=20)

except Exception as e:
    error_label = customtkinter.CTkLabel(app, text=f"Erro ao carregar imagens: {e}\\nVerifique se os arquivos existem.",
                                         text_color="red")
    error_label.pack(pady=20)
    print(f"Erro: {e}")

app.mainloop()
                </code></pre><button class="copy-button bg-slate-600 hover:bg-slate-500 text-white" onclick="copyCode(this)">Copiar</button></div>
                <p class="mt-2 bg-sky-100 dark:bg-sky-900 p-3 rounded-md border-l-4 border-sky-500">💡 <strong>Dica Pro:</strong> Use <code>PIL.Image</code> para carregar, redimensionar e manipular suas imagens antes de passá-las para <code>customtkinter.CTkImage</code>. Lembre-se de instalar <code>Pillow</code> (<code>pip install Pillow</code>).</p>
            `
        },
        "integration": {
            title: "🔗 Seção 7: Conectando com o Mundo Exterior – Integração com o Sistema Operacional",
            html: `
                <p>Sua aplicação não vive isolada! Ela pode interagir com o sistema operacional para abrir arquivos, exibir mensagens importantes e muito mais.</p>
                <h4 class="text-xl font-medium mt-6 mb-2">💬 Mensagens de Diálogo (<code>tkinter.messagebox</code>): Conversando com o Usuário</h4>
                <p>Para avisos, erros ou perguntas, use as caixas de diálogo padrão do Tkinter. Elas são simples, eficazes e funcionam perfeitamente com o CustomTkinter.</p>
                <div class="code-container relative my-4"><pre class="bg-slate-800 dark:bg-slate-900 text-white p-4 rounded-md overflow-x-auto"><code class="language-python">
import customtkinter
from tkinter import messagebox # Importe o messagebox do tkinter padrão

def show_info_dialog():
    messagebox.showinfo("👋 Olá!", "Esta é uma mensagem informativa para você!")

def show_warning_dialog():
    messagebox.showwarning("⚠️ Atenção!", "Algo importante precisa da sua atenção.")

def show_error_dialog():
    messagebox.showerror("❌ Erro Crítico!", "Ocorreu um problema inesperado. Por favor, tente novamente.")

def ask_question_dialog():
    response = messagebox.askquestion("❓ Pergunta", "Você está gostando do CustomTkinter?")
    if response == 'yes':
        print("🎉 Que bom! O usuário está gostando!")
    else:
        print("😔 Que pena! Precisamos melhorar!")

app = customtkinter.CTk()
app.geometry("450x300")
app.title("Diálogos Essenciais")

# ℹ️ Botão de Informação
btn_info = customtkinter.CTkButton(app, text="Mostrar Informação", command=show_info_dialog)
btn_info.pack(pady=10)

# ⚠️ Botão de Aviso
btn_warning = customtkinter.CTkButton(app, text="Mostrar Aviso", command=show_warning_dialog, fg_color="orange")
btn_warning.pack(pady=10)

# ❌ Botão de Erro
btn_error = customtkinter.CTkButton(app, text="Mostrar Erro", command=show_error_dialog, fg_color="red")
btn_error.pack(pady=10)

# ❓ Botão de Pergunta
btn_question = customtkinter.CTkButton(app, text="Fazer Pergunta", command=ask_question_dialog, fg_color="blue")
btn_question.pack(pady=10)

app.mainloop()
                </code></pre><button class="copy-button bg-slate-600 hover:bg-slate-500 text-white" onclick="copyCode(this)">Copiar</button></div>
                <p class="mt-2 bg-sky-100 dark:bg-sky-900 p-3 rounded-md border-l-4 border-sky-500">💡 <strong>Dica Pro:</strong> As funções <code>ask...</code> (como <code>askquestion</code>, <code>askyesno</code>) retornam valores booleanos ou strings (<code>'yes'</code>, <code>'no'</code>) que você pode usar para controlar o fluxo da sua aplicação.</p>

                <h4 class="text-xl font-medium mt-6 mb-2">📂 Caixas de Diálogo de Arquivo (<code>tkinter.filedialog</code>): Abrindo e Salvando Tesouros!</h4>
                <p>Permita que seus usuários abram e salvem arquivos de forma nativa, usando as caixas de diálogo do sistema operacional.</p>
                <div class="code-container relative my-4"><pre class="bg-slate-800 dark:bg-slate-900 text-white p-4 rounded-md overflow-x-auto"><code class="language-python">
import customtkinter
from tkinter import filedialog # Importe o filedialog do tkinter padrão

def open_file_dialog():
    file_path = filedialog.askopenfilename(
        title="Abrir Seu Documento Secreto",
        initialdir="/", # Começa no diretório raiz (ou use '.' para o diretório atual)
        filetypes=[("Arquivos de Texto", "*.txt"),
                   ("Documentos Word", "*.docx"),
                   ("Todos os Arquivos", "*.*")]
    )
    if file_path:
        print(f"🎉 Arquivo selecionado: {file_path}")
        # Aqui você poderia ler o conteúdo do arquivo
        try:
            with open(file_path, 'r', encoding='utf-8') as f:
                content = f.read()
                print(f"Conteúdo:\\n{content[:100]}...") # Mostra os primeiros 100 caracteres
        except Exception as e:
            print(f"Erro ao ler o arquivo: {e}")

def save_file_dialog():
    file_path = filedialog.asksaveasfilename(
        title="Salvar Sua Obra-Prima",
        defaultextension=".txt", # Extensão padrão se o usuário não digitar
        filetypes=[("Arquivos de Texto", "*.txt"),
                   ("Documentos CSV", "*.csv"),
                   ("Todos os Arquivos", "*.*")]
    )
    if file_path:
        print(f"💾 Salvando em: {file_path}")
        # Aqui você poderia escrever dados para o arquivo
        try:
            with open(file_path, 'w', encoding='utf-8') as f:
                f.write("Este é o conteúdo salvo da sua aplicação CustomTkinter!")
            print("Conteúdo salvo com sucesso!")
        except Exception as e:
            print(f"Erro ao salvar o arquivo: {e}")

def select_directory_dialog():
    dir_path = filedialog.askdirectory(
        title="Selecionar Pasta de Destino",
        initialdir="/"
    )
    if dir_path:
        print(f"📁 Pasta selecionada: {dir_path}")

app = customtkinter.CTk()
app.geometry("500x300")
app.title("Gerenciador de Arquivos")

# 📂 Botão para Abrir Arquivo
btn_open = customtkinter.CTkButton(app, text="Abrir Arquivo", command=open_file_dialog, fg_color="green")
btn_open.pack(pady=15)

# 💾 Botão para Salvar Arquivo
btn_save = customtkinter.CTkButton(app, text="Salvar Arquivo Como...", command=save_file_dialog, fg_color="blue")
btn_save.pack(pady=15)

# 📁 Botão para Selecionar Pasta
btn_dir = customtkinter.CTkButton(app, text="Selecionar Pasta", command=select_directory_dialog, fg_color="purple")
btn_dir.pack(pady=15)

app.mainloop()
                </code></pre><button class="copy-button bg-slate-600 hover:bg-slate-500 text-white" onclick="copyCode(this)">Copiar</button></div>
                <p class="mt-2 bg-sky-100 dark:bg-sky-900 p-3 rounded-md border-l-4 border-sky-500">💡 <strong>Dica Pro:</strong> Use <code>initialdir</code> para definir o diretório inicial da caixa de diálogo e <code>filetypes</code> para filtrar os tipos de arquivo que o usuário pode selecionar.</p>
            `
        },
        "best_practices": {
            title: "🏆 Seção 8: O Caminho para a Maestria – Melhores Práticas e Dicas de Ouro",
            html: `
                <p>Construir GUIs é uma arte, e como todo artista, você pode se beneficiar de algumas dicas valiosas para criar aplicações robustas, bonitas e fáceis de manter.</p>
                <ul class="list-disc list-inside space-y-3 mt-4">
                    <li><strong>🏗️ Organização do Código: A Base de Tudo!</strong>
                        <ul class="list-circle list-inside ml-4 mt-1 space-y-1">
                            <li><strong>Classes são Suas Amigas:</strong> Para aplicações que vão além de um "Olá Mundo", use classes! Crie uma classe para sua aplicação principal (<code>App</code>) e, se necessário, classes separadas para módulos ou janelas complexas. Isso torna o código mais limpo, modular e fácil de gerenciar.</li>
                            <li><strong>Separe Responsabilidades:</strong> Mantenha a lógica da interface (como os widgets são exibidos) separada da lógica de negócios (o que sua aplicação <em>faz</em>). Isso facilita a manutenção e o teste.</li>
                        </ul>
                    </li>
                    <li><strong>📏 Responsividade: Sua App em Qualquer Tela!</strong>
                        <ul class="list-circle list-inside ml-4 mt-1 space-y-1">
                            <li><strong><code>grid()</code> e Pesos:</strong> O <code>grid()</code> combinado com <code>grid_rowconfigure(weight=...)</code> e <code>grid_columnconfigure(weight=...)</code> é a dupla perfeita para criar layouts que se adaptam automaticamente quando a janela é redimensionada.</li>
                            <li><strong><code>pack(expand=True, fill="both")</code>:</strong> Para widgets que devem preencher o espaço disponível, use esses argumentos com <code>pack()</code>.</li>
                            <li><strong>Cuidado com <code>place()</code>:</strong> Embora poderoso, <code>place()</code> pode dificultar a responsividade se você usar apenas coordenadas absolutas. Prefira <code>relx</code>, <code>rely</code>, <code>relwidth</code>, <code>relheight</code> para posicionamento proporcional.</li>
                        </ul>
                    </li>
                    <li><strong>♻️ Gerenciamento de Recursos: Sem Vazamentos!</strong>
                         <ul class="list-circle list-inside ml-4 mt-1 space-y-1">
                            <li><strong>Imagens:</strong> Sempre, <strong>sempre</strong> mantenha uma referência às suas imagens (<code>PIL.ImageTk.PhotoImage</code> ou <code>customtkinter.CTkImage</code>) em uma variável. Se você não fizer isso, o Python pode "limpar" a imagem da memória e ela desaparecerá da sua UI!</li>
                        </ul>
                    </li>
                    <li><strong>🛡️ Tratamento de Erros: Prepare-se para o Inesperado!</strong>
                        <ul class="list-circle list-inside ml-4 mt-1 space-y-1">
                            <li>Use blocos <code>try-except</code> para capturar e lidar com erros que possam ocorrer, especialmente ao interagir com arquivos, redes ou dados externos. Isso evita que sua aplicação "quebre" e oferece uma experiência mais suave ao usuário.</li>
                        </ul>
                    </li>
                    <li><strong>✍️ Comentários e Documentação: Seu Código Fala por Si!</strong>
                         <ul class="list-circle list-inside ml-4 mt-1 space-y-1">
                            <li>Comente seu código! Explique a lógica por trás de partes complexas, o propósito de funções e classes. Isso não só ajuda você no futuro, mas também qualquer outra pessoa que for ler seu código.</li>
                        </ul>
                    </li>
                    <li><strong>🧪 Testes: A Prova de Fogo!</strong>
                         <ul class="list-circle list-inside ml-4 mt-1 space-y-1">
                            <li>Teste sua aplicação em diferentes sistemas operacionais (Windows, macOS, Linux), com diferentes temas (claro/escuro) e diferentes escalas de UI. Isso garante que sua aplicação seja robusta e funcione bem para todos os usuários.</li>
                        </ul>
                    </li>
                </ul>
                <p class="mt-4 font-semibold">Exemplo de estrutura com classe:</p>
                <div class="code-container relative my-4"><pre class="bg-slate-800 dark:bg-slate-900 text-white p-4 rounded-md overflow-x-auto"><code class="language-python">
# Exemplo de estrutura com classe
import customtkinter

class MyApp(customtkinter.CTk):
    def __init__(self):
        super().__init__()
        self.geometry("600x400")
        self.title("Minha Aplicação Organizada")
        self._create_widgets()

    def _create_widgets(self):
        # Todos os seus widgets e layouts aqui
        label = customtkinter.CTkLabel(self, text="Bem-vindo à minha app!")
        label.pack(pady=20)
        button = customtkinter.CTkButton(self, text="Clique-me", command=self._button_click)
        button.pack(pady=10)

    def _button_click(self):
        print("Botão clicado dentro da classe!")

if __name__ == "__main__":
    customtkinter.set_appearance_mode("System")
    customtkinter.set_default_color_theme("blue")
    app = MyApp()
    app.mainloop()
                </code></pre><button class="copy-button bg-slate-600 hover:bg-slate-500 text-white" onclick="copyCode(this)">Copiar</button></div>
            `
        },
        "resources": {
            title: "🌌 Seção 9: Além do Horizonte – Recursos Adicionais",
            html: `
                <p>Aprender é uma jornada contínua! Aqui estão alguns lugares onde você pode aprofundar seus conhecimentos e encontrar inspiração:</p>
                <ul class="list-disc list-inside space-y-2 mt-4">
                    <li><strong>📚 Documentação Oficial do CustomTkinter:</strong> O tesouro de informações mais atualizado e detalhado. Sempre consulte-o para as últimas novidades e funcionalidades.
                        <br/><a href="https://customtkinter.tomschimansky.com/" target="_blank" rel="noopener noreferrer" class="text-blue-600 dark:text-blue-400 hover:underline">https://customtkinter.tomschimansky.com/</a>
                    </li>
                    <li><strong>💻 Repositório GitHub:</strong> Explore o código-fonte, veja exemplos de outros desenvolvedores, reporte bugs ou até mesmo contribua com o projeto!
                        <br/><a href="https://github.com/TomSchimansky/CustomTkinter" target="_blank" rel="noopener noreferrer" class="text-blue-600 dark:text-blue-400 hover:underline">https://github.com/TomSchimansky/CustomTkinter</a>
                    </li>
                    <li><strong>🎥 Tutoriais em Vídeo e Artigos Online:</strong> A comunidade Python é vasta e cheia de recursos! Uma busca rápida no YouTube ou em blogs de programação revelará inúmeros tutoriais para te ajudar a visualizar e praticar.</li>
                </ul>
            `
        },
        "gemini_tools": {
            title: "✨ Seção 10: Ferramentas Gemini para CustomTkinter ✨",
            html: `
                <p>Explore o poder da Inteligência Artificial para aprimorar sua experiência com CustomTkinter!</p>
                <h4 class="text-xl font-medium mt-6 mb-2">✨ Explicar Código com Gemini ✨</h4>
                <p>Cole um trecho de código CustomTkinter abaixo e peça ao Gemini para explicá-lo de forma clara e concisa. Perfeito para entender conceitos complexos ou otimizar seu aprendizado!</p>
                <div class="code-explanation-input-container my-4">
                    <textarea id="explainCodeInput" class="w-full h-40 p-3 border border-slate-300 dark:border-slate-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-slate-50 dark:bg-slate-700 text-sm" placeholder="Cole seu código CustomTkinter aqui para que o Gemini o explique..."></textarea>
                    <button id="explainCodeButton" class="mt-3 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500">Explicar Código ✨</button>
                    <div id="explainCodeLoading" class="mt-2 text-blue-500 hidden">Carregando explicação...</div>
                    <div id="explainCodeError" class="mt-2 text-red-500 hidden"></div>
                    <div id="explainCodeOutput" class="mt-4 p-4 bg-slate-100 dark:bg-slate-700 rounded-md border border-slate-200 dark:border-slate-600 hidden"></div>
                </div>

                <h4 class="text-xl font-medium mt-8 mb-2">✨ Gerar Exemplo de Widget com Gemini ✨</h4>
                <p>Descreva o widget CustomTkinter que você deseja criar em linguagem natural, e o Gemini gerará o código Python para você!</p>
                <div class="widget-generation-input-container my-4">
                    <input type="text" id="generateWidgetInput" class="w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 bg-slate-50 dark:bg-slate-700 text-sm" placeholder="Ex: 'um botão vermelho com texto 'Parar' e um ícone de X'">
                    <button id="generateWidgetButton" class="mt-3 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500">Gerar Código ✨</button>
                    <div id="generateWidgetLoading" class="mt-2 text-blue-500 hidden">Gerando código...</div>
                    <div id="generateWidgetError" class="mt-2 text-red-500 hidden"></div>
                    <div id="generateWidgetOutput" class="mt-4 p-4 bg-slate-100 dark:bg-slate-700 rounded-md border border-slate-200 dark:border-slate-600 hidden">
                        <pre class="bg-slate-800 dark:bg-slate-900 text-white p-4 rounded-md overflow-x-auto relative"><code class="language-python"></code><button class="copy-button bg-slate-600 hover:bg-slate-500 text-white" onclick="copyCode(this)">Copiar</button></pre>
                    </div>
                </div>
            `
        },
        "conclusion": {
            title: "🎉 Parabéns, Futuro(a) Mestre das GUIs! 🎉",
             html: `
                <p class="text-lg">Você acaba de percorrer um guia abrangente e detalhado sobre o <strong>CustomTkinter</strong>! Espero que esta jornada tenha sido inspiradora e que você se sinta confiante para começar a criar suas próprias interfaces gráficas incríveis.</p>
                <p class="mt-3">Lembre-se: a prática leva à perfeição. Comece com projetos pequenos, experimente os widgets, brinque com os layouts e não tenha medo de errar. Cada linha de código é um passo à frente no seu aprendizado.</p>
                <p class="mt-3">Agora, vá em frente e transforme suas ideias em realidade visual! O mundo das GUIs espera por você.</p>
                <p class="mt-6 text-xl font-semibold text-center text-blue-600 dark:text-blue-500">Feliz codificação! ✨</p>
            `
        }
    };

    const navigationStructure = [
        { id: 'intro', text: '🚀 Seção 1: Ponto de Partida' },
        { id: 'config', text: '🎨 Seção 2: Pinceladas de Estilo' },
        {
            id: 'widgets', text: '🧰 Seção 3: Widgets Essenciais', children: [
                { id: 'widget_ctk_toplevel', text: '1. CTk & CTkToplevel' },
                { id: 'widget_label', text: '2. CTkLabel' },
                { id: 'widget_button', text: '3. CTkButton' },
                { id: 'widget_entry', text: '4. CTkEntry' },
                { id: 'widget_textbox', text: '5. CTkTextbox' },
                { id: 'widget_checkbox', text: '6. CTkCheckBox' },
                { id: 'widget_radiobutton', text: '7. CTkRadioButton' },
                { id: 'widget_combobox', text: '8. CTkComboBox' },
                { id: 'widget_slider', text: '9. CTkSlider' },
                { id: 'widget_progressbar', text: '10. CTkProgressBar' },
                { id: 'widget_frame', text: '11. CTkFrame' },
                { id: 'widget_switch', text: '12. CTkSwitch' },
                { id: 'widget_scrollableframe', text: '13. CTkScrollableFrame' }
            ]
        },
        { id: 'layouts', text: '🎼 Seção 4: Maestro do Layout' },
        { id: 'events_vars', text: '💃 Seção 5: Dança da Interação' },
        { id: 'customization', text: '🎨 Seção 6: O Toque Pessoal' },
        { id: 'integration', text: '🔗 Seção 7: Conectando com o Mundo' },
        { id: 'best_practices', text: '🏆 Seção 8: Melhores Práticas' },
        { id: 'resources', text: '🌌 Seção 9: Recursos Adicionais' },
        { id: 'gemini_tools', text: '✨ Seção 10: Ferramentas Gemini', children: [
            { id: 'gemini_explain_code_section', text: 'Explicar Código' },
            { id: 'gemini_generate_widget_section', text: 'Gerar Widget' }
        ]},
        { id: 'conclusion', text: '🎉 Conclusão' }
    ];

    document.addEventListener('DOMContentLoaded', () => {
        const navigationMenu = document.getElementById('navigationMenu');
        const contentDisplay = document.getElementById('contentDisplay');
        const contentPlaceholder = document.getElementById('content-placeholder');
        const themeToggle = document.getElementById('themeToggle');
        const themeIcon = document.getElementById('themeIcon');
        const searchBar = document.getElementById('searchBar');
        const sidebar = document.getElementById('sidebar');
        const sidebarToggle = document.getElementById('sidebarToggle');
        let currentHighlightTerm = '';

        function applyTheme(isDark) {
            if (isDark) {
                document.documentElement.classList.add('dark');
                themeIcon.textContent = '☀️'; // Sun icon for dark mode
            } else {
                document.documentElement.classList.remove('dark');
                themeIcon.textContent = '🌙'; // Moon icon for light mode
            }
        }

        async function loadContent(id) {
            contentPlaceholder.style.display = 'none';
            const content = contentData[id] || contentData['widgets_intro'];
            
            contentDisplay.classList.remove('content-fade-enter-active');
            contentDisplay.classList.add('content-fade-enter');
            
            setTimeout(() => {
                contentDisplay.innerHTML = `<h2 class="text-3xl font-bold mb-6 text-blue-700 dark:text-blue-400">${content.title}</h2>${content.html}`;
                highlightSearchTermInContent(currentHighlightTerm);
                contentDisplay.classList.add('content-fade-enter-active');
                contentDisplay.scrollTop = 0; // Scroll to top of new content

                // Add explain code buttons to all <pre> blocks in the newly loaded content
                const codeBlocks = contentDisplay.querySelectorAll('pre');
                codeBlocks.forEach((pre, index) => {
                    // Check if the button already exists to prevent duplicates on re-load
                    if (pre.querySelector('.explain-code-button')) return;

                    const explainButton = document.createElement('button');
                    explainButton.textContent = 'Explicar ✨';
                    explainButton.className = 'explain-code-button bg-blue-600 text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500';
                    pre.style.position = 'relative'; // Ensure pre is positioned for absolute button
                    pre.appendChild(explainButton);

                    const explanationDiv = document.createElement('div');
                    explanationDiv.className = 'mt-2 p-3 bg-slate-100 dark:bg-slate-700 rounded-md border border-slate-200 dark:border-slate-600 hidden text-sm';
                    explanationDiv.id = `explanation-output-${id}-${index}`; // Unique ID
                    pre.parentNode.insertBefore(explanationDiv, pre.nextSibling); // Insert after pre

                    const loadingDiv = document.createElement('div');
                    loadingDiv.className = 'mt-2 text-blue-500 hidden text-sm';
                    loadingDiv.textContent = 'Carregando explicação...';
                    loadingDiv.id = `explanation-loading-${id}-${index}`;
                    pre.parentNode.insertBefore(loadingDiv, explanationDiv);

                    const errorDiv = document.createElement('div');
                    errorDiv.className = 'mt-2 text-red-500 hidden text-sm';
                    errorDiv.id = `explanation-error-${id}-${index}`;
                    pre.parentNode.insertBefore(errorDiv, loadingDiv);

                    explainButton.onclick = async () => {
                        const codeContent = pre.querySelector('code').textContent;
                        const prompt = `Explique o seguinte código CustomTkinter/Python de forma clara e concisa, como se estivesse ensinando a um iniciante. Foque na funcionalidade principal, nos widgets utilizados e nos conceitos do CustomTkinter envolvidos. Não inclua o código original na resposta, apenas a explicação. Responda em português. Limite a explicação a no máximo 150 palavras. \n\nCódigo:\n\`\`\`python\n${codeContent}\n\`\`\``;
                        
                        // Toggle visibility: if explanation is already visible, hide it. Otherwise, fetch and show.
                        if (!explanationDiv.classList.contains('hidden')) {
                            explanationDiv.classList.add('hidden');
                            return;
                        }

                        await callGeminiAPI(
                            prompt,
                            explanationDiv,
                            loadingDiv,
                            errorDiv,
                            false // Not code generation
                        );
                    };
                });

                // Attach event listeners for the specific LLM tool section if it's loaded
                if (id === 'gemini_tools') {
                    const explainCodeInput = document.getElementById('explainCodeInput');
                    const explainCodeButton = document.getElementById('explainCodeButton');
                    const explainCodeLoading = document.getElementById('explainCodeLoading');
                    const explainCodeError = document.getElementById('explainCodeError');
                    const explainCodeOutput = document.getElementById('explainCodeOutput');

                    explainCodeButton.onclick = async () => {
                        const codeContent = explainCodeInput.value;
                        if (!codeContent.trim()) {
                            explainCodeError.textContent = 'Por favor, insira o código para explicar.';
                            explainCodeError.classList.remove('hidden');
                            return;
                        }
                        const prompt = `Explique o seguinte código CustomTkinter/Python de forma clara e concisa, como se estivesse ensinando a um iniciante. Foque na funcionalidade principal, nos widgets utilizados e nos conceitos do CustomTkinter envolvidos. Não inclua o código original na resposta, apenas a explicação. Responda em português. Limite a explicação a no máximo 200 palavras. \n\nCódigo:\n\`\`\`python\n${codeContent}\n\`\`\``;
                        await callGeminiAPI(
                            prompt,
                            explainCodeOutput,
                            explainCodeLoading,
                            explainCodeError,
                            false // Not code generation
                        );
                    };

                    const generateWidgetInput = document.getElementById('generateWidgetInput');
                    const generateWidgetButton = document.getElementById('generateWidgetButton');
                    const generateWidgetLoading = document.getElementById('generateWidgetLoading');
                    const generateWidgetError = document.getElementById('generateWidgetError');
                    const generateWidgetOutput = document.getElementById('generateWidgetOutput');

                    generateWidgetButton.onclick = async () => {
                        const description = generateWidgetInput.value;
                        if (!description.trim()) {
                            generateWidgetError.textContent = 'Por favor, descreva o widget que deseja gerar.';
                            generateWidgetError.classList.remove('hidden');
                            return;
                        }
                        const prompt = `Gere um exemplo de código CustomTkinter/Python para o seguinte widget, baseado na descrição. Inclua as importações necessárias (customtkinter e PIL.Image se for usar imagens). O código deve ser completo e funcional. Não inclua texto explicativo, apenas o bloco de código. Responda em português. \n\nDescrição: ${description}`;
                        await callGeminiAPI(
                            prompt,
                            generateWidgetOutput,
                            generateWidgetLoading,
                            generateWidgetError,
                            true // Is code generation
                        );
                    };
                }

            }, 50); // Small delay for fade out/in effect

            document.querySelectorAll('#navigationMenu a').forEach(link => {
                link.classList.remove('bg-blue-100', 'dark:bg-blue-700', 'text-blue-700', 'dark:text-blue-300', 'font-semibold');
                link.classList.add('hover:bg-slate-200', 'dark:hover:bg-slate-700');
            });
            const activeLink = document.querySelector(`#navigationMenu a[data-id="${id}"]`);
            if (activeLink) {
                activeLink.classList.add('bg-blue-100', 'dark:bg-blue-700', 'text-blue-700', 'dark:text-blue-300', 'font-semibold');
                activeLink.classList.remove('hover:bg-slate-200', 'dark:hover:bg-slate-700');

                // Expand parent if it's a sub-item
                let parent = activeLink.closest('ul.ml-4');
                if(parent && parent.previousElementSibling.tagName === 'BUTTON'){
                    const parentButton = parent.previousElementSibling;
                    if(parent.classList.contains('hidden')){
                        parentButton.click();
                    }
                }
            }
             if (window.innerWidth < 768) { // md breakpoint
                sidebar.classList.add('-translate-x-full');
            }
        }
        
        function buildMenu(items, parentElement, isSubmenu = false) {
            const ul = document.createElement('ul');
            ul.className = isSubmenu ? 'ml-4 mt-1 space-y-1 hidden' : 'space-y-1';

            items.forEach(item => {
                const li = document.createElement('li');
                if (item.children) {
                    const button = document.createElement('button');
                    button.className = 'w-full text-left px-3 py-2 rounded-md text-sm flex justify-between items-center hover:bg-slate-200 dark:hover:bg-slate-700 focus:outline-none';
                    button.innerHTML = `<span>${item.text}</span> <span class="transform transition-transform duration-200">&#x25B6;</span>`; // Right arrow
                    
                    const subUl = buildMenu(item.children, document.createElement('div'), true);
                    button.onclick = () => {
                        subUl.classList.toggle('hidden');
                        button.querySelector('span.transform').classList.toggle('rotate-90');
                        if (!subUl.classList.contains('hidden') && !contentData[item.id]) {
                             loadContent('widgets_intro'); // Load intro for parent if it has no direct content
                        } else if (!subUl.classList.contains('hidden') && contentData[item.id]) {
                            loadContent(item.id);
                        }
                    };
                    li.appendChild(button);
                    li.appendChild(subUl);
                } else {
                    const a = document.createElement('a');
                    a.href = '#';
                    a.dataset.id = item.id;
                    a.textContent = item.text;
                    a.className = 'block px-3 py-2 rounded-md text-sm hover:bg-slate-200 dark:hover:bg-slate-700';
                    a.onclick = (e) => {
                        e.preventDefault();
                        loadContent(item.id);
                    };
                    li.appendChild(a);
                }
                ul.appendChild(li);
            });
            parentElement.appendChild(ul);
            return ul;
        }

        buildMenu(navigationStructure, navigationMenu);

        themeToggle.addEventListener('click', () => {
            const isDark = document.documentElement.classList.toggle('dark');
            localStorage.setItem('theme', isDark ? 'dark' : 'light');
            applyTheme(isDark);
        });

        const savedTheme = localStorage.getItem('theme');
        applyTheme(savedTheme === 'dark');

        searchBar.addEventListener('input', (e) => {
            const searchTerm = e.target.value.toLowerCase().trim();
            currentHighlightTerm = searchTerm;
            const navLinks = document.querySelectorAll('#navigationMenu li');

            navLinks.forEach(li => {
                const buttonOrLink = li.querySelector('button, a');
                const textContent = buttonOrLink.textContent.toLowerCase();
                const isVisible = textContent.includes(searchTerm);
                
                if (buttonOrLink.tagName === 'A' || (buttonOrLink.tagName === 'BUTTON' && li.querySelector('ul'))) {
                    // For actual links or parent buttons
                    li.style.display = isVisible ? '' : 'none';
                } else if (buttonOrLink.tagName === 'BUTTON' && !li.querySelector('ul')) {
                    // If it's a button that acts like a link (though my structure uses <a> for end-nodes)
                     li.style.display = isVisible ? '' : 'none';
                }

                // If a child is visible, make sure its parent button is also visible
                if (isVisible && buttonOrLink.closest('ul.ml-4')) {
                    let parentLi = buttonOrLink.closest('ul.ml-4').closest('li');
                    if (parentLi) parentLi.style.display = '';
                }
            });
            highlightSearchTermInContent(searchTerm);
        });

        function highlightSearchTermInContent(term) {
            const contentDiv = document.getElementById('contentDisplay');
            if (!term || term.length < 2) {
                removeHighlights(contentDiv);
                return;
            }

            removeHighlights(contentDiv);

            const treeWalker = document.createTreeWalker(contentDiv, NodeFilter.SHOW_TEXT, null, false);
            let currentNode;
            const nodesToReplace = [];

            while (currentNode = treeWalker.nextNode()) {
                const text = currentNode.nodeValue;
                const lowerText = text.toLowerCase();
                let startIndex = 0;
                let index = lowerText.indexOf(term, startIndex);
                
                if (index !== -1 && !isInsideScriptOrStyle(currentNode)) {
                    nodesToReplace.push({node: currentNode, term: term});
                }
            }
            
            nodesToReplace.forEach(item => {
                const parent = item.node.parentNode;
                if (!parent) return;

                const text = item.node.nodeValue;
                const fragments = text.split(new RegExp(`(${escapeRegExp(item.term)})`, 'gi'));
                
                const newNodes = fragments.map(fragment => {
                    if (fragment.toLowerCase() === item.term.toLowerCase()) {
                        const span = document.createElement('span');
                        span.className = 'search-highlight';
                        span.textContent = fragment;
                        return span;
                    }
                    return document.createTextNode(fragment);
                });
                
                parent.replaceChild(createFragment(newNodes), item.node);
            });
        }
        
        function isInsideScriptOrStyle(node) {
            let parent = node.parentNode;
            while(parent) {
                if (parent.tagName === 'SCRIPT' || parent.tagName === 'STYLE' || parent.tagName === 'PRE' || parent.tagName === 'CODE') {
                    return true;
                }
                parent = parent.parentNode;
            }
            return false;
        }

        function createFragment(nodes) {
            const fragment = document.createDocumentFragment();
            nodes.forEach(node => fragment.appendChild(node));
            return fragment;
        }

        function removeHighlights(container) {
            const highlights = container.querySelectorAll('span.search-highlight');
            highlights.forEach(span => {
                const parent = span.parentNode;
                if (parent) {
                    parent.replaceChild(document.createTextNode(span.textContent), span);
                    parent.normalize(); 
                }
            });
        }

        function escapeRegExp(string) {
            return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
        }


        sidebarToggle.addEventListener('click', () => {
            sidebar.classList.toggle('-translate-x-full');
        });
        
        // Auto-load first section or a specific section if hash is present
        const initialHash = window.location.hash.substring(1);
        if (initialHash && contentData[initialHash]) {
            loadContent(initialHash);
        } else {
             // Keep placeholder initially, or load 'intro'
            // loadContent('intro'); 
        }
        
        // Handle hash changes for navigation
        window.addEventListener('hashchange', () => {
            const hash = window.location.hash.substring(1);
            if (hash && contentData[hash]) {
                loadContent(hash);
            }
        });

        // LLM API Call Function
        async function callGeminiAPI(prompt, outputElement, loadingElement, errorElement, isCodeGeneration = false) {
            outputElement.classList.add('hidden');
            errorElement.classList.add('hidden');
            loadingElement.classList.remove('hidden');

            let chatHistory = [];
            chatHistory.push({ role: "user", parts: [{ text: prompt }] });

            const payload = { contents: chatHistory };
            // A chave de API não é mais usada aqui, pois a chamada é para o seu backend
            // const apiKey = ""; // Canvas will provide this at runtime
            // const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
            
            // >>>>>>>>>>>>> ALTERAÇÃO AQUI: APONTANDO PARA O SEU BACKEND LOCAL <<<<<<<<<<<<<
            const apiUrl = 'http://127.0.0.1:5000/ask_gemini'; // Seu servidor Flask local
            // >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                const result = await response.json();

                if (result.response) { // O backend agora retorna { 'response': 'texto_do_gemini' }
                    const text = result.response;
                    
                    if (isCodeGeneration) {
                        outputElement.querySelector('code').textContent = text;
                        outputElement.classList.remove('hidden');
                    } else {
                        outputElement.innerHTML = text.replace(/\n/g, '<br>');
                        outputElement.classList.remove('hidden');
                    }
                } else if (result.error) {
                    errorElement.textContent = `Erro do Backend: ${result.error}`;
                    errorElement.classList.remove('hidden');
                    console.error('Backend error:', result.error);
                } else {
                    errorElement.textContent = 'Erro ao obter resposta do Gemini. Estrutura inesperada.';
                    errorElement.classList.remove('hidden');
                    console.error('Unexpected Gemini API response structure:', result);
                }
            } catch (e) {
                errorElement.textContent = `Erro na comunicação com o servidor: ${e.message}`;
                errorElement.classList.remove('hidden');
                console.error('Fetch error:', e);
            } finally {
                loadingElement.classList.add('hidden');
            }
        }
    });

    function copyCode(buttonElement) {
        const preElement = buttonElement.previousElementSibling;
        const codeElement = preElement.querySelector('code');
        let textToCopy = '';

        if (codeElement) {
            textToCopy = codeElement.innerText || codeElement.textContent;
        } else {
            textToCopy = preElement.innerText || preElement.textContent;
        }
        
        navigator.clipboard.writeText(textToCopy).then(() => {
            const originalText = buttonElement.textContent;
            buttonElement.textContent = 'Copiado!';
            buttonElement.classList.add('bg-green-500', 'hover:bg-green-600');
            buttonElement.classList.remove('bg-slate-600', 'hover:bg-slate-500');
            setTimeout(() => {
                buttonElement.textContent = originalText;
                buttonElement.classList.remove('bg-green-500', 'hover:bg-green-600');
                buttonElement.classList.add('bg-slate-600', 'hover:bg-slate-500');
            }, 2000);
        }).catch(err => {
            console.error('Erro ao copiar: ', err);
            // Fallback for older browsers or iframes (less reliable)
            try {
                const textArea = document.createElement("textarea");
                textArea.value = textToCopy;
                textArea.style.position = "fixed"; 
                textArea.style.left = "-9999px";
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);

                const originalText = buttonElement.textContent;
                buttonElement.textContent = 'Copiado!';
                buttonElement.classList.add('bg-green-500', 'hover:bg-green-600');
                buttonElement.classList.remove('bg-slate-600', 'hover:bg-slate-500');
                setTimeout(() => {
                    buttonElement.textContent = originalText;
                    buttonElement.classList.remove('bg-green-500', 'hover:bg-green-600');
                    buttonElement.classList.add('bg-slate-600', 'hover:bg-slate-500');
                }, 2000);

            } catch (execCommandErr) {
                 console.error('Fallback de cópia falhou: ', execCommandErr);
                 alert("Erro ao copiar. Seu navegador pode não suportar esta funcionalidade ou estar em um ambiente restrito.");
            }
        });
    }

</script>
</body>
</html>
